<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Page Optimisée</title>
<link rel="stylesheet" href="./facture.component.scss"> 
<div class="factures-container" [ngClass]="theme">
  <h1>Factures</h1>
  <div class="contracts-container">
    <div class="headerr">
      <label for="active-contracts"><b>Tous mes contrats</b></label>
      <div class="badge">
        <div class="badge-text">{{ contractCount }}</div>
      </div>
    </div>
    <div class="dropdown-wrapper">
      <div class="dropdown-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M7.99967 14C10.333 11.6 12.6663 9.45097 12.6663 6.8C12.6663 4.14903 10.577 2 7.99967 2C5.42235 2 3.33301 4.14903 3.33301 6.8C3.33301 9.45097 5.66634 11.6 7.99967 14Z" stroke="#544E4E" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M7.99967 8C8.73605 8 9.33301 7.40305 9.33301 6.66667C9.33301 5.93029 8.73605 5.33333 7.99967 5.33333C7.26329 5.33333 6.66634 5.93029 6.66634 6.66667C6.66634 7.40305 7.26329 8 7.99967 8Z" stroke="#544E4E" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>
      </div>
      <div class="dropdown-container">
        <div class="selected-item" (click)="toggleDropdown()">
          <span class="address">{{ selectedContract?.AddressCompteur }}</span>
       
            <svg class="custom-icon" *ngIf="selectedContract?.BusinessSectorText === 'Electricité'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.86784 1.54223C9.07332 1.63247 9.1935 1.84857 9.16176 2.07074L8.57662 6.1667L12.2278 6.1667C12.3904 6.16668 12.5448 6.16666 12.6691 6.17793C12.7886 6.18876 12.9847 6.21595 13.1521 6.35046C13.3509 6.51024 13.4656 6.75228 13.4633 7.00734C13.4615 7.22206 13.3583 7.39103 13.2911 7.49037C13.2211 7.59369 13.1233 7.7132 13.0203 7.83901L7.72043 14.3166C7.57832 14.4903 7.33788 14.5481 7.1324 14.4578C6.92692 14.3676 6.80674 14.1515 6.83848 13.9293L7.42361 9.83336L3.7724 9.83336C3.60983 9.83338 3.4554 9.8334 3.33112 9.82213C3.21163 9.8113 3.01555 9.78411 2.84818 9.6496C2.64936 9.48982 2.53466 9.24778 2.5369 8.99272C2.53878 8.778 2.6419 8.60903 2.70918 8.50969C2.77916 8.40637 2.87696 8.28686 2.97992 8.16105L8.27981 1.68341C8.42192 1.50972 8.66235 1.45199 8.86784 1.54223ZM7.9182 3.70455L3.76645 8.77892C3.75075 8.7981 3.73595 8.81621 3.72199 8.83332C3.74408 8.83335 3.76746 8.83336 3.79225 8.83336H8.00012C8.14506 8.83336 8.28288 8.89626 8.37784 9.00576C8.47281 9.11526 8.51559 9.26059 8.49509 9.40407L8.08203 12.2955L12.2338 7.22114C12.2495 7.20196 12.2643 7.18385 12.2782 7.16673C12.2562 7.1667 12.2328 7.1667 12.208 7.1667H8.00012C7.85517 7.1667 7.71736 7.1038 7.62239 6.9943C7.52742 6.8848 7.48464 6.73948 7.50514 6.59599L7.9182 3.70455Z" fill="white"/></svg>
            <svg class="custom-icon1" *ngIf="selectedContract?.BusinessSectorText === 'Gaz'"  xmlns="http://www.w3.org/2000/svg" width="10" height="17" viewBox="0 0 10 17" fill="none">
              <path d="M7.0404 5.13914C6.07438 3.41048 5.09734 2.12417 5.08632 2.11253L5 2L4.91368 2.11253C4.9045 2.12611 3.92562 3.41048 2.9596 5.13914C1.65932 7.4673 1 9.45011 1 11.0294C1 14.3276 2.34619 16 5 16C7.65381 16 9 14.3276 9 11.0294C9 9.45011 8.34068 7.4673 7.0404 5.13914ZM3.2259 13.5011C3.2259 11.9781 4.63636 9.94485 5 9.44429C5.36547 9.94485 6.7741 11.9762 6.7741 13.5011C6.7741 15.0261 6.19376 15.7148 5 15.7148C3.80624 15.7148 3.2259 14.9911 3.2259 13.5011ZM6.16804 15.6314C6.71717 15.255 6.99633 14.5449 6.99633 13.5011C6.99633 11.6774 5.16345 9.28326 5.08632 9.18237L5.00184 9.07178L4.91735 9.18237C4.84022 9.28326 3.00735 11.6774 3.00735 13.5011C3.00735 14.543 3.2865 15.255 3.83563 15.6314C2.08356 15.1968 1.22406 13.6815 1.22406 11.0294C1.22406 7.66519 4.43251 3.14856 5.00367 2.37445C5.573 3.1505 8.78329 7.66713 8.78329 11.0294C8.78329 13.6815 7.92378 15.1968 6.17172 15.6314H6.16804Z" stroke="white" stroke-width="1.5"/>
            </svg>
   
          <span class="details">{{ selectedContract?.BusinessSectorText }},</span>
          <span class="addres">n° {{ selectedContract?.ContractISU}}</span>
        </div>
      
        <div *ngIf="isOpen" class="options-list">
          <div *ngFor="let contract of contractts" class="option-item" (click)="selectContract(contract)">
            <div class="dropdown-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M7.99967 14C10.333 11.6 12.6663 9.45097 12.6663 6.8C12.6663 4.14903 10.577 2 7.99967 2C5.42235 2 3.33301 4.14903 3.33301 6.8C3.33301 9.45097 5.66634 11.6 7.99967 14Z" stroke="#544E4E" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> <path d="M7.99967 8C8.73605 8 9.33301 7.40305 9.33301 6.66667C9.33301 5.93029 8.73605 5.33333 7.99967 5.33333C7.26329 5.33333 6.66634 5.93029 6.66634 6.66667C6.66634 7.40305 7.26329 8 7.99967 8Z" stroke="#544E4E" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/> </svg>
              </div>
            <span class="address">{{ contract.AddressCompteur }}</span>
          
              <svg  class="custom-icon" *ngIf="contract?.BusinessSectorText === 'Electricité'" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.86784 1.54223C9.07332 1.63247 9.1935 1.84857 9.16176 2.07074L8.57662 6.1667L12.2278 6.1667C12.3904 6.16668 12.5448 6.16666 12.6691 6.17793C12.7886 6.18876 12.9847 6.21595 13.1521 6.35046C13.3509 6.51024 13.4656 6.75228 13.4633 7.00734C13.4615 7.22206 13.3583 7.39103 13.2911 7.49037C13.2211 7.59369 13.1233 7.7132 13.0203 7.83901L7.72043 14.3166C7.57832 14.4903 7.33788 14.5481 7.1324 14.4578C6.92692 14.3676 6.80674 14.1515 6.83848 13.9293L7.42361 9.83336L3.7724 9.83336C3.60983 9.83338 3.4554 9.8334 3.33112 9.82213C3.21163 9.8113 3.01555 9.78411 2.84818 9.6496C2.64936 9.48982 2.53466 9.24778 2.5369 8.99272C2.53878 8.778 2.6419 8.60903 2.70918 8.50969C2.77916 8.40637 2.87696 8.28686 2.97992 8.16105L8.27981 1.68341C8.42192 1.50972 8.66235 1.45199 8.86784 1.54223ZM7.9182 3.70455L3.76645 8.77892C3.75075 8.7981 3.73595 8.81621 3.72199 8.83332C3.74408 8.83335 3.76746 8.83336 3.79225 8.83336H8.00012C8.14506 8.83336 8.28288 8.89626 8.37784 9.00576C8.47281 9.11526 8.51559 9.26059 8.49509 9.40407L8.08203 12.2955L12.2338 7.22114C12.2495 7.20196 12.2643 7.18385 12.2782 7.16673C12.2562 7.1667 12.2328 7.1667 12.208 7.1667H8.00012C7.85517 7.1667 7.71736 7.1038 7.62239 6.9943C7.52742 6.8848 7.48464 6.73948 7.50514 6.59599L7.9182 3.70455Z" fill="white"/></svg>
           
  
            <svg  class="custom-icon1" *ngIf="contract?.BusinessSectorText === 'Gaz'"  xmlns="http://www.w3.org/2000/svg" width="10" height="17" viewBox="0 0 10 17" fill="none">
              <path d="M7.0404 5.13914C6.07438 3.41048 5.09734 2.12417 5.08632 2.11253L5 2L4.91368 2.11253C4.9045 2.12611 3.92562 3.41048 2.9596 5.13914C1.65932 7.4673 1 9.45011 1 11.0294C1 14.3276 2.34619 16 5 16C7.65381 16 9 14.3276 9 11.0294C9 9.45011 8.34068 7.4673 7.0404 5.13914ZM3.2259 13.5011C3.2259 11.9781 4.63636 9.94485 5 9.44429C5.36547 9.94485 6.7741 11.9762 6.7741 13.5011C6.7741 15.0261 6.19376 15.7148 5 15.7148C3.80624 15.7148 3.2259 14.9911 3.2259 13.5011ZM6.16804 15.6314C6.71717 15.255 6.99633 14.5449 6.99633 13.5011C6.99633 11.6774 5.16345 9.28326 5.08632 9.18237L5.00184 9.07178L4.91735 9.18237C4.84022 9.28326 3.00735 11.6774 3.00735 13.5011C3.00735 14.543 3.2865 15.255 3.83563 15.6314C2.08356 15.1968 1.22406 13.6815 1.22406 11.0294C1.22406 7.66519 4.43251 3.14856 5.00367 2.37445C5.573 3.1505 8.78329 7.66713 8.78329 11.0294C8.78329 13.6815 7.92378 15.1968 6.17172 15.6314H6.16804Z" stroke="white" stroke-width="1.5"/>
            </svg>
         
            <span class="details">{{ contract.BusinessSectorText }},</span>
            <span class="addres">n° {{ contract.ContractISU}}</span>
          </div>
        </div>
    <div class="dropdown-arrow">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
    </div>
  </div></div>
</div>

  <div class="facture-container">
    <div class="filters">
      
      <div class="date-range" *ngIf="!isDateSelected">
        <div class="arrow-left" (click)="goToPrevDate()">
        </div>
        <input type="date" class="start-date" id="start-date" [value]="startDate | date:'yyyy-MM-dd'"
          (change)="onStartDateChange($event)">
        <span> - </span>
        <input type="date" class="end-date" id="end-date" [value]="endDate | date:'yyyy-MM-dd'"
          (change)="onEndDateChange($event)">
      </div>

      <div *ngIf="isDateSelected" class="containner">
        <svg (click)="decrementStartMonth()" xmlns="http://www.w3.org/2000/svg" width="20" height="20"viewBox="0 0 20 20" fill="none"><path fill-rule="evenodd" clip-rule="evenodd"d="M12.9419 4.55806C13.186 4.80214 13.186 5.19786 12.9419 5.44194L8.38388 10L12.9419 14.5581C13.186 14.8021 13.186 15.1979 12.9419 15.4419C12.6979 15.686 12.3021 15.686 12.0581 15.4419L7.05806 10.4419C6.81398 10.1979 6.81398 9.80214 7.05806 9.55806L12.0581 4.55806C12.3021 4.31398 12.6979 4.31398 12.9419 4.55806Z" fill="#8F8F8F" /> </svg>
        <div class="text">{{ getFormattedDate() }}</div>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M11.0002 5.43984H5.00016C4.72402 5.43984 4.50016 5.66369 4.50016 5.93984C4.50016 6.21598 4.72402 6.43984 5.00016 6.43984H11.0002C11.2763 6.43984 11.5002 6.21598 11.5002 5.93984C11.5002 5.66369 11.2763 5.43984 11.0002 5.43984Z"fill="black" /><path fill-rule="evenodd" clip-rule="evenodd" d="M11.2602 2.37984H11.3335C13.1744 2.37984 14.6668 3.87222 14.6668 5.71317V11.7132C14.6668 13.5541 13.1744 15.0465 11.3335 15.0465H4.66683C3.78277 15.0465 2.93493 14.6953 2.30981 14.0702C1.68469 13.4451 1.3335 12.5972 1.3335 11.7132V5.71317C1.3335 3.87222 2.82588 2.37984 4.66683 2.37984H4.72683V1.1665C4.72683 0.890362 4.95069 0.666504 5.22683 0.666504C5.50297 0.666504 5.72683 0.890362 5.72683 1.1665V2.37984H10.2602V1.1665C10.2602 0.890362 10.484 0.666504 10.7602 0.666504C11.0363 0.666504 11.2602 0.890362 11.2602 1.1665V2.37984ZM11.3335 14.0465C12.6222 14.0465 13.6668 13.0018 13.6668 11.7132V5.71317C13.6668 4.42451 12.6222 3.37984 11.3335 3.37984H4.66683C3.37817 3.37984 2.3335 4.42451 2.3335 5.71317V11.7132C2.3335 13.0018 3.37817 14.0465 4.66683 14.0465H11.3335Z" fill="black" /></svg>
        <svg (click)="incrementEndMonth()" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"fill="none"><path fill-rule="evenodd" clip-rule="evenodd"d="M7.05806 4.55806C6.81398 4.80214 6.81398 5.19786 7.05806 5.44194L11.6161 10L7.05806 14.5581C6.81398 14.8021 6.81398 15.1979 7.05806 15.4419C7.30214 15.686 7.69786 15.686 7.94194 15.4419L12.9419 10.4419C13.186 10.1979 13.186 9.80214 12.9419 9.55806L7.94194 4.55806C7.69786 4.31398 7.30214 4.31398 7.05806 4.55806Z"fill="#8F8F8F" /></svg>
      </div>
      <div class="arrow-right" (click)="goToNextDate()" *ngIf="!isDateSelected">
      </div>
      <div class="search-hero">
        <input class="form-control search-input" type="text" name="search" [(ngModel)]="searchText" autocomplete="off"placeholder="Rechercher&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#61442;">
      </div>
      <div class="icon-container">
        <div class="outer-circle">
          <div class="inner-circle"></div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" class="icon-svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M8 2H6C3.79086 2 2 3.79086 2 6V9C2 11.2091 3.79086 13 6 13H8C10.2091 13 12 11.2091 12 9V6C12 3.79086 10.2091 2 8 2ZM6 3.5H8C9.38071 3.5 10.5 4.61929 10.5 6V9C10.5 10.3807 9.38071 11.5 8 11.5H6C4.61929 11.5 3.5 10.3807 3.5 9V6C3.5 4.61929 4.61929 3.5 6 3.5Z" fill="#363538"/><path d="M17.75 3C17.75 2.58579 17.4142 2.25 17 2.25C16.5858 2.25 16.25 2.58579 16.25 3V5.25H14C13.5858 5.25 13.25 5.58579 13.25 6C13.25 6.41421 13.5858 6.75 14 6.75H16.25V9C16.25 9.41421 16.5858 9.75 17 9.75C17.4142 9.75 17.75 9.41421 17.75 9V6.75H20C20.4142 6.75 20.75 6.41421 20.75 6C20.75 5.58579 20.4142 5.25 20 5.25H17.75V3Z" fill="#363538" /> <path fill-rule="evenodd" clip-rule="evenodd"d="M16 11H18C20.2091 11 22 12.7909 22 15V18C22 20.2091 20.2091 22 18 22H16C13.7909 22 12 20.2091 12 18V15C12 12.7909 13.7909 11 16 11ZM16 12.5C14.6193 12.5 13.5 13.6193 13.5 15V18C13.5 19.3807 14.6193 20.5 16 20.5H18C19.3807 20.5 20.5 19.3807 20.5 18V15C20.5 13.6193 19.3807 12.5 18 12.5H16Z" fill="#363538"/> <path fill-rule="evenodd"  clip-rule="evenodd" d="M7.85789 14.9779C7.30001 14.0171 5.87034 14.0066 5.2939 14.9517L2.45448 19.6071C1.82146 20.645 2.69505 21.75 3.7287 21.75H9.27135C10.2932 21.75 11.1634 20.6704 10.5611 19.6333L7.85789 14.9779ZM3.81938 20.25L6.5639 15.7501L6.56848 15.75L6.57179 15.7501L9.18469 20.25H3.81938Z" fill="#363538" />
          </svg>
        </div>
        <div class="text-container">
          <div class="text" (click)="toggleEstimate()">Estimer prochaine facture</div>
        </div>
      </div>
      <div class="icon-container1">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="16.5" cy="16.5" r="7.5" fill="#E2F133"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2 3.5H22C22.2761 3.5 22.5 3.72386 22.5 4V14C22.5 14.2761 22.2761 14.5 22 14.5H2C1.72386 14.5 1.5 14.2761 1.5 14V4C1.5 3.72386 1.72386 3.5 2 3.5ZM0 4C0 2.89543 0.895431 2 2 2H22C23.1046 2 24 2.89543 24 4V14C24 15.1046 23.1046 16 22 16H2C0.89543 16 0 15.1046 0 14V4ZM5.07698 6.68193H10.3077C10.5839 6.68193 10.8077 6.90579 10.8077 7.18193V7.63647C10.8077 7.91262 10.5839 8.13647 10.3077 8.13647H5.07698C4.80083 8.13647 4.57698 7.91262 4.57698 7.63647V7.18193C4.57698 6.90579 4.80083 6.68193 5.07698 6.68193ZM3.07698 7.18193C3.07698 6.07736 3.97241 5.18193 5.07698 5.18193H10.3077C11.4123 5.18193 12.3077 6.07736 12.3077 7.18193V7.63647C12.3077 8.74104 11.4123 9.63647 10.3077 9.63647H5.07698C3.97241 9.63647 3.07698 8.74104 3.07698 7.63647V7.18193ZM14.0192 5.81807C14.0192 5.40386 14.355 5.06807 14.7692 5.06807H20.3077C20.7219 5.06807 21.0577 5.40386 21.0577 5.81807C21.0577 6.23229 20.7219 6.56807 20.3077 6.56807H14.7692C14.355 6.56807 14.0192 6.23229 14.0192 5.81807ZM14.7692 8.82543C14.355 8.82543 14.0192 9.16121 14.0192 9.57543C14.0192 9.98964 14.355 10.3254 14.7692 10.3254H20.3077C20.7219 10.3254 21.0577 9.98964 21.0577 9.57543C21.0577 9.16121 20.7219 8.82543 20.3077 8.82543H14.7692Z" fill="#1E1E1E"/></svg>
      <div class="text-section">
        <div class="text1"  (click)="toggleTable()">Voir le détail du chèque énergie</div>
      </div>
      </div>
       
<!-- Overlay pour Estimer Prochaine Facture -->

<div *ngIf="isEstimateVisible" class="overlay">
  <div class="modal-content">
    <div class="close-icon" (click)="closeEstimate()">×</div>
    <h1 class="title">Estimer prochaine facture</h1>
    <div>
      <p>Renseignez vos index actuels</p>
    </div>
    <div class="box-container">
      <!-- HP Inputs -->
      <div class="box-row">
        <div class="box" *ngFor="let item of hpItems | keyvalue; let i = index">
          <input 
            type="number" 
            [ngModel]="item.value" 
            (ngModelChange)="updateValue('hp', item.key, $event)" />
        </div>
        <span class="box-label">HP</span>
      </div>

      <!-- HC Inputs -->
      <div class="box-row">
        <div class="box" *ngFor="let item of hcItems | keyvalue; let i = index">
          <input 
            type="number" 
            [ngModel]="item.value" 
            (ngModelChange)="updateValue('hc', item.key, $event)" />
        </div>
        <span class="box-label">HC</span>
      </div>
    </div>

    <div *ngIf="!isCalculated" class="action-box">
      <div class="action" (click)="calculateEstimate()">
        <div class="action-text">Calculer</div>
      </div>
    </div>

    <div *ngIf="isCalculated" class="estimated-amount">
      <div class="amount-container">
        <div class="amount-label">
          Montant estimé
        </div>
        <div class="amount-value">
          {{ estimatedAmount }}€
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Overlay pour le tableau -->
<div *ngIf="isTableVisible" class="overlay">
  <div class="modal-content">
    <div class="close-icon" (click)="closeTable()"></div>
          <h1 class="title">Vous bénéficiez d’un chèque énérgie </h1>
          <div>Ci-dessous les informations liées à votre chèque énergie</div>
          <div class="container">
            <div class="row">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="16.5" cy="16.5" r="7.5" fill="#E2F133"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M2 3.5H22C22.2761 3.5 22.5 3.72386 22.5 4V14C22.5 14.2761 22.2761 14.5 22 14.5H2C1.72386 14.5 1.5 14.2761 1.5 14V4C1.5 3.72386 1.72386 3.5 2 3.5ZM0 4C0 2.89543 0.895431 2 2 2H22C23.1046 2 24 2.89543 24 4V14C24 15.1046 23.1046 16 22 16H2C0.89543 16 0 15.1046 0 14V4ZM5.07698 6.68193H10.3077C10.5839 6.68193 10.8077 6.90579 10.8077 7.18193V7.63647C10.8077 7.91262 10.5839 8.13647 10.3077 8.13647H5.07698C4.80083 8.13647 4.57698 7.91262 4.57698 7.63647V7.18193C4.57698 6.90579 4.80083 6.68193 5.07698 6.68193ZM3.07698 7.18193C3.07698 6.07736 3.97241 5.18193 5.07698 5.18193H10.3077C11.4123 5.18193 12.3077 6.07736 12.3077 7.18193V7.63647C12.3077 8.74104 11.4123 9.63647 10.3077 9.63647H5.07698C3.97241 9.63647 3.07698 8.74104 3.07698 7.63647V7.18193ZM14.0192 5.81807C14.0192 5.40386 14.355 5.06807 14.7692 5.06807H20.3077C20.7219 5.06807 21.0577 5.40386 21.0577 5.81807C21.0577 6.23229 20.7219 6.56807 20.3077 6.56807H14.7692C14.355 6.56807 14.0192 6.23229 14.0192 5.81807ZM14.7692 8.82543C14.355 8.82543 14.0192 9.16121 14.0192 9.57543C14.0192 9.98964 14.355 10.3254 14.7692 10.3254H20.3077C20.7219 10.3254 21.0577 9.98964 21.0577 9.57543C21.0577 9.16121 20.7219 8.82543 20.3077 8.82543H14.7692Z" fill="#1E1E1E"/>
              </svg>
                <div>
                    <div class="label">Cheque N°</div>
                    <div>
                        <div>1234567889</div>
                        <div class="small-text">Enrégistré le 30 Déc. 2023</div>
                    </div>
                </div>
            </div>
            <div>
                <div class="label">Valable</div>
                <div>jusqu’à 23 Mars 2024</div>
            </div>
            <div>
                <div class="label">Montant initiale</div>
                <div>535€</div>
            </div>
            <div>
                <div class="label">Solde</div>
                <div>135€</div>
            </div>
        </div>
        <div class="paiements-container">
          <div class="titre">
            <p>6 paiements réglés avec votre chèque énergie</p>
          </div>
        
          <div class="paiement-list">
            <div *ngFor="let paiement of paiements" class="paiement-item">
              <div class="paiement-date">
                <span>{{ paiement.date }}</span>
              </div>
        
              <div class="paiement-numero">
                <div class="paiement-numero-detail">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none">
                    <path d="M11.3333 9.0655H14V13.0655C14 13.8019 13.403 14.3988 12.6667 14.3988M11.3333 9.0655V13.0655C11.3333 13.8019 11.9303 14.3988 12.6667 14.3988M11.3333 9.0655V4.23689C11.3333 3.6333 11.3333 3.3315 11.2065 3.15648C11.0959 3.00381 10.9258 2.90512 10.7384 2.88482C10.5236 2.86156 10.2615 3.0113 9.73745 3.31077L9.52922 3.42976C9.33632 3.53998 9.23987 3.5951 9.13745 3.61668C9.04681 3.63577 8.95319 3.63577 8.86255 3.61668C8.76013 3.5951 8.66367 3.53998 8.47079 3.42976L7.19588 2.70124C7.00299 2.59102 6.90654 2.5359 6.80411 2.51432C6.71348 2.49523 6.61986 2.49523 6.52922 2.51432C6.42679 2.5359 6.33035 2.59102 6.13745 2.70124L4.86255 3.42976C4.66965 3.53998 4.57321 3.5951 4.47078 3.61668C4.38014 3.63577 4.28652 3.63577 4.19589 3.61668C4.09346 3.5951 3.99701 3.53998 3.80412 3.42976L3.59588 3.31076C3.07181 3.0113 2.80978 2.86156 2.59491 2.88482C2.40748 2.90512 2.23741 3.00381 2.1268 3.15648C2 3.3315 2 3.6333 2 4.23689V11.1988C2 12.3189 2 12.879 2.21799 13.3068C2.40973 13.6831 2.71569 13.9891 3.09202 14.1808C3.51984 14.3988 4.0799 14.3988 5.2 14.3988H12.6667M4.66667 9.0655H7.33333M4.66667 6.39883H6.66667H8.66667" stroke="#544E4E" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <div class="numero-text">
                    <span>{{ paiement.numero }}</span>
                  </div>
                </div>
              </div>
        
              <div class="paiement-montant">
                <span>{{ paiement.montant }}€</span>
              </div>
        
              <div class="paiement-status">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none"><path d="M11.5131 15.6787L8.43362 12.6075C8.30304 12.4774 8.22964 12.3006 8.22964 12.1162C8.22964 11.9319 8.30304 11.7551 8.43362 11.625C8.70825 11.3619 9.14146 11.3619 9.41609 11.625L11.3067 13.5239V5.19351C11.3067 4.8105 11.6172 4.5 12.0002 4.5C12.3833 4.5 12.6938 4.8105 12.6938 5.19351V13.5239L14.5844 11.625C14.859 11.3619 15.2923 11.3619 15.5669 11.625C15.6975 11.7551 15.7709 11.9319 15.7709 12.1162C15.7709 12.3006 15.6975 12.4774 15.5669 12.6075L12.4874 15.6787C12.3603 15.8116 12.1841 15.8862 12.0002 15.8851C11.816 15.8882 11.6391 15.8133 11.5131 15.6787Z" fill="#AAB614"/><path d="M16.3099 8.9748H17.3089C19.3864 9.01994 21.0363 10.7363 20.9994 12.8139V15.9595C21.0363 18.037 19.3864 19.7534 17.3089 19.7985L6.69159 19.7325C4.61416 19.6873 2.96425 17.971 3.00112 15.8934V12.7478C2.97675 11.7457 3.3522 10.775 4.04458 10.0501C4.73697 9.3252 5.68937 8.90562 6.69159 8.88398H7.69058C8.07359 8.88398 8.38409 9.19448 8.38409 9.5775C8.38409 9.96051 8.07359 10.271 7.69058 10.271H6.69159C6.05641 10.2903 5.45538 10.563 5.02262 11.0284C4.58986 11.4937 4.36137 12.1129 4.38814 12.7478V15.8686C4.36137 16.5035 4.58986 17.1228 5.02262 17.5881C5.45538 18.0534 6.05641 18.3262 6.69159 18.3455L17.3089 18.4611C17.9441 18.4418 18.5451 18.169 18.9779 17.7037C19.4107 17.2383 19.6391 16.6191 19.6124 15.9842V12.8387C19.6391 12.2037 19.4107 11.5845 18.9779 11.1192C18.5451 10.6539 17.9441 10.3811 17.3089 10.3618H16.3099C15.9269 10.3618 15.6164 10.0513 15.6164 9.66831C15.6164 9.2853 15.9269 8.9748 16.3099 8.9748Z" fill="#AAB614"/></svg>
              </div>
            </div>
          </div>
        </div>
        
</div></div>
  </div>

    <div class="containevr" *ngIf="selectedInvoiceCount() > 0"> <!-- Affiche seulement si au moins une facture est sélectionnée -->
      <div class="section left">
        <div class="text">{{ selectedCount }} factures sélectionnées</div>
        <div class="button cancel" (click)="annuler()">     
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none"><path d="M6.46424 14.0355L13.5353 6.96447M6.46424 6.96447L13.5353 14.0355" stroke="#8E9D25" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div class="text">Annuler</div>
        </div>
      </div>
      <div class="section right">
        <div class="button download">
          <div class="text" (click)="downloadSelectedPDFs()">Télécharger les factures</div>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="21" viewBox="0 0 20 21" fill="none"><path d="M9.59428 13.1491L7.02801 10.5897C6.9192 10.4813 6.85803 10.334 6.85803 10.1804C6.85803 10.0267 6.9192 9.87944 7.02801 9.771C7.25687 9.55171 7.61789 9.55171 7.84674 9.771L9.42228 11.3534V4.41142C9.42228 4.09224 9.68103 3.8335 10.0002 3.8335C10.3194 3.8335 10.5781 4.09224 10.5781 4.41142V11.3534L12.1537 9.771C12.3825 9.55171 12.7435 9.55171 12.9724 9.771C13.0812 9.87944 13.1424 10.0267 13.1424 10.1804C13.1424 10.334 13.0812 10.4813 12.9724 10.5897L10.4061 13.1491C10.3002 13.2598 10.1534 13.322 10.0002 13.3211C9.84668 13.3237 9.69922 13.2612 9.59428 13.1491Z" fill="#1E1E1E"/><path d="M13.5916 7.5625H14.4241C16.1553 7.60012 17.5302 9.0304 17.4995 10.7617V13.383C17.5302 15.1144 16.1553 16.5447 14.4241 16.5823L5.57632 16.5272C3.84513 16.4896 2.47021 15.0593 2.50093 13.328V10.7067C2.48063 9.87157 2.7935 9.06269 3.37049 8.4586C3.94748 7.8545 4.74115 7.50485 5.57632 7.48682H6.40881C6.72799 7.48682 6.98674 7.74556 6.98674 8.06474C6.98674 8.38392 6.72799 8.64267 6.40881 8.64267H5.57632C5.04701 8.65875 4.54615 8.88604 4.18552 9.27382C3.82488 9.6616 3.63447 10.1776 3.65678 10.7067V13.3074C3.63447 13.8365 3.82488 14.3525 4.18552 14.7402C4.54615 15.128 5.04701 15.3553 5.57632 15.3714L14.4241 15.4677C14.9534 15.4516 15.4543 15.2243 15.8149 14.8366C16.1755 14.4488 16.366 13.9328 16.3436 13.4037V10.7824C16.366 10.2533 16.1755 9.73728 15.8149 9.3495C15.4543 8.96172 14.9534 8.73443 14.4241 8.71835H13.5916C13.2724 8.71835 13.0137 8.4596 13.0137 8.14042C13.0137 7.82124 13.2724 7.5625 13.5916 7.5625Z" fill="#1E1E1E"/><path d="M9.59428 13.1491L7.02801 10.5897C6.9192 10.4813 6.85803 10.334 6.85803 10.1804C6.85803 10.0267 6.9192 9.87944 7.02801 9.771C7.25687 9.55171 7.61789 9.55171 7.84674 9.771L9.42228 11.3534V4.41142C9.42228 4.09224 9.68103 3.8335 10.0002 3.8335C10.3194 3.8335 10.5781 4.09224 10.5781 4.41142V11.3534L12.1537 9.771C12.3825 9.55171 12.7435 9.55171 12.9724 9.771C13.0812 9.87944 13.1424 10.0267 13.1424 10.1804C13.1424 10.334 13.0812 10.4813 12.9724 10.5897L10.4061 13.1491C10.3002 13.2598 10.1534 13.322 10.0002 13.3211C9.84668 13.3237 9.69922 13.2612 9.59428 13.1491Z" stroke="#1E1E1E"/><path d="M13.5916 7.5625H14.4241C16.1553 7.60012 17.5302 9.0304 17.4995 10.7617V13.383C17.5302 15.1144 16.1553 16.5447 14.4241 16.5823L5.57632 16.5272C3.84513 16.4896 2.47021 15.0593 2.50093 13.328V10.7067C2.48063 9.87157 2.7935 9.06269 3.37049 8.4586C3.94748 7.8545 4.74115 7.50485 5.57632 7.48682H6.40881C6.72799 7.48682 6.98674 7.74556 6.98674 8.06474C6.98674 8.38392 6.72799 8.64267 6.40881 8.64267H5.57632C5.04701 8.65875 4.54615 8.88604 4.18552 9.27382C3.82488 9.6616 3.63447 10.1776 3.65678 10.7067V13.3074C3.63447 13.8365 3.82488 14.3525 4.18552 14.7402C4.54615 15.128 5.04701 15.3553 5.57632 15.3714L14.4241 15.4677C14.9534 15.4516 15.4543 15.2243 15.8149 14.8366C16.1755 14.4488 16.366 13.9328 16.3436 13.4037V10.7824C16.366 10.2533 16.1755 9.73728 15.8149 9.3495C15.4543 8.96172 14.9534 8.73443 14.4241 8.71835H13.5916C13.2724 8.71835 13.0137 8.4596 13.0137 8.14042C13.0137 7.82124 13.2724 7.5625 13.5916 7.5625Z" stroke="#1E1E1E"/></svg>
        </div>
      </div>
    </div>


    <table class="table table-striped">
      <tbody>
        <tr>
          <th><input type="checkbox" [checked]="iconeSelectionnee"  (change)="toggleAllSelection($event)"></th>
          <th (click)="sortByDate()">
            DATE D'ÉMISSION
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M9 10.4995L11.5 12.9995L13.9999 10.4999" stroke="#3A3A3A" stroke-linecap="round"stroke-linejoin="round" /><path d="M11.5 6.99951V12.9995" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 7.99951H7.49994" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3.99951H11.4999" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 11.9995H6.5" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /> </svg>
          </th>
          <th (click)="sortByFacture()">FACTURE N
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M9 10.4995L11.5 12.9995L13.9999 10.4999" stroke="#3A3A3A" stroke-linecap="round"stroke-linejoin="round" /><path d="M11.5 6.99951V12.9995" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 7.99951H7.49994" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3.99951H11.4999" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 11.9995H6.5" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /> </svg>
          </th>
          <th (click)="sortByMontant()">MONTANT
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M9 10.4995L11.5 12.9995L13.9999 10.4999" stroke="#3A3A3A" stroke-linecap="round"stroke-linejoin="round" /><path d="M11.5 6.99951V12.9995" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 7.99951H7.49994" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3.99951H11.4999" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 11.9995H6.5" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /></svg>
          </th>
          <th colspan="3" (click)="sortByStatut()">STATUT
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M9 10.4995L11.5 12.9995L13.9999 10.4999" stroke="#3A3A3A" stroke-linecap="round"stroke-linejoin="round" /><path d="M11.5 6.99951V12.9995" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 7.99951H7.49994" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3.99951H11.4999" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 11.9995H6.5" stroke="#3A3A3A" stroke-linecap="round" stroke-linejoin="round" /> </svg>
          </th>
        </tr>
      <tbody>
        <!-- <tr *ngFor="let hero of filteredHeroes"> -->
        <tr *ngFor="let hero of paginatedHeroes">
          <td><input type="checkbox" [checked]="hero.selected" (change)="toggleCheckbox(hero)"></td>
          <td class="date-cell">{{ convertSAPDate(hero.PostingDate) }}</td>
          <td class="facture-cell">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17"fill="none"><path d="M11.3333 9.0655H14V13.0655C14 13.8019 13.403 14.3988 12.6667 14.3988M11.3333 9.0655V13.0655C11.3333 13.8019 11.9303 14.3988 12.6667 14.3988M11.3333 9.0655V4.23689C11.3333 3.6333 11.3333 3.3315 11.2065 3.15648C11.0959 3.00381 10.9258 2.90512 10.7384 2.88482C10.5236 2.86156 10.2615 3.0113 9.73745 3.31077L9.52922 3.42976C9.33632 3.53998 9.23987 3.5951 9.13745 3.61668C9.04681 3.63577 8.95319 3.63577 8.86255 3.61668C8.76013 3.5951 8.66367 3.53998 8.47079 3.42976L7.19588 2.70124C7.00299 2.59102 6.90654 2.5359 6.80411 2.51432C6.71348 2.49523 6.61986 2.49523 6.52922 2.51432C6.42679 2.5359 6.33035 2.59102 6.13745 2.70124L4.86255 3.42976C4.66965 3.53998 4.57321 3.5951 4.47078 3.61668C4.38014 3.63577 4.28652 3.63577 4.19589 3.61668C4.09346 3.5951 3.99701 3.53998 3.80412 3.42976L3.59588 3.31076C3.07181 3.0113 2.80978 2.86156 2.59491 2.88482C2.40748 2.90512 2.23741 3.00381 2.1268 3.15648C2 3.3315 2 3.6333 2 4.23689V11.1988C2 12.3189 2 12.879 2.21799 13.3068C2.40973 13.6831 2.71569 13.9891 3.09202 14.1808C3.51984 14.3988 4.0799 14.3988 5.2 14.3988H12.6667M4.66667 9.0655H7.33333M4.66667 6.39883H6.66667H8.66667"stroke="#544E4E" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            {{ hero.UtilitiesInvoicingDocument }}</td>
          <td class="date-cell">{{ hero.TotalAmount }} € </td>
          <td class="status-cell">
            <span [ngClass]="getStatusClass(hero.StatusInvoicingDocument)">
              {{ hero.StatusInvoicingDocument || 'N/A' }}
            </span>
            <span [innerHTML]="getStatutDetails(hero)"></span>
          </td>
          <td class="action-column">
            <ng-container [ngSwitch]="hero.StatusInvoicingDocument">
              <button class="details-button" *ngSwitchCase="'Non Soldée'" (click)="payFacture(hero)">
                <b>Régler la facture</b>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M5 10.0002H15M15 10.0002L10.8333 5.8335M15 10.0002L10.8333 14.1668" stroke="#1E1E1E"stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>
              <img *ngSwitchCase="'Totalement Soldée'" src="assets/images/download.png" alt="Télécharger"
                (click)="downloadPDF(hero)">
              <!-- <img *ngSwitchCase="'A venir'" src="assets/images/download.png" alt="Télécharger"
                (click)="downloadPDF(hero)"> -->
            </ng-container>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Contrôles de pagination -->
    <div class="pagination">
      <button class="page-button" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none"> <path fill-rule="evenodd" clip-rule="evenodd"d="M10.8536 3.64645C11.0488 3.84171 11.0488 4.15829 10.8536 4.35355L7.20711 8L10.8536 11.6464C11.0488 11.8417 11.0488 12.1583 10.8536 12.3536C10.6583 12.5488 10.3417 12.5488 10.1464 12.3536L6.14645 8.35355C5.95118 8.15829 5.95118 7.84171 6.14645 7.64645L10.1464 3.64645C10.3417 3.45118 10.6583 3.45118 10.8536 3.64645Z"fill="#373C17" /></svg>
      </button>
      <ng-container *ngFor="let page of getPagesArray(); let i = index">
        <div *ngIf="i > 0 && getPagesArray()[i - 1] !== page - 1" class="ellipsis">...</div>
        <div class="page-number" [ngClass]="{'active': currentPage === page, 'inactive': currentPage !== page}"
          (click)="changePage(page)">{{ page }}
        </div>
      </ng-container>
      <button class="page-button" (click)="changePage(currentPage + 1)" [disabled]="currentPage === totalPages">
        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd"d="M6.14645 3.64645C5.95118 3.84171 5.95118 4.15829 6.14645 4.35355L9.79289 8L6.14645 11.6464C5.95118 11.8417 5.95118 12.1583 6.14645 12.3536C6.34171 12.5488 6.65829 12.5488 6.85355 12.3536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.85355 3.64645C6.65829 3.45118 6.34171 3.45118 6.14645 3.64645Z"fill="#373C17" /></svg>
      </button>
    </div>
 




 